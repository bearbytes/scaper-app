datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String    @id @default(cuid())
  userName  String
  fullName  String
  email     String
  avatarUrl String?
  articles  Article[]
  projects  Project[]
  medias    Media[]
  Like      Like[]
}

model Project {
  id          String         @id @default(cuid())
  slug        String
  name        String
  description String?
  tags        Tag[]
  ownerId     String
  owner       User           @relation(fields: [ownerId], references: [id])
  phases      ProjectPhase[]
  Like        Like[]
}

model ProjectPhase {
  id          String  @id @default(cuid())
  title       String?
  description String?
  projectId   String
  project     Project @relation(fields: [projectId], references: [id])
  tags        Tag[]
  medias      Media[]
}

model Media {
  id             String        @id @default(cuid())
  mediaType      MediaType
  uri            String
  ownerId        String
  owner          User          @relation(fields: [ownerId], references: [id])
  projectPhaseId String?
  projectPhase   ProjectPhase? @relation(fields: [projectPhaseId], references: [id])
  tags           Tag[]
  Like           Like[]
}

model Article {
  id       String @id @default(cuid())
  title    String
  text     String
  author   User   @relation(fields: [authorId], references: [id])
  authorId String
  tags     Tag[]
  Like     Like[]
}

model Tag {
  slug         String         @id
  text         String
  media        Media[]
  project      Project[]
  projectPhase ProjectPhase[]
  articles     Article[]
}

enum MediaType {
  Image
  Video
}

model Like {
  id        String  @id @default(cuid())
  ownerId   String
  owner     User    @relation(fields: [ownerId], references: [id])
  projectId String
  project   Project @relation(fields: [projectId], references: [id])
  articleId String
  article   Article @relation(fields: [articleId], references: [id])
  mediaId   String
  media     Media   @relation(fields: [mediaId], references: [id])
}
